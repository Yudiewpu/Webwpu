<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wahana Pondok Ungu - Form Input Keuangan</title>
    <style>
        /* Reset CSS untuk menghilangkan margin dan padding default */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Gaya untuk body */
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f4f4f4;
        }

        /* Gaya untuk navbar */
        nav {
            background: linear-gradient(to right, #000000, #0033cc); /* Gradasi hitam ke biru */
            color: #fff;
            padding: 1rem;
            position: fixed;
            width: 100%;
            top: 0;
            left: 0;
            z-index: 1000;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: auto;
        }

        .nav-logo {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .nav-menu {
            display: flex;
            gap: 1.5rem;
        }

        .nav-link {
            color: #fff;
            text-decoration: none;
            padding: 0.5rem 1rem;
            transition: background 0.3s ease, color 0.3s ease;
        }

        .nav-link:hover {
            background: #555;
            border-radius: 5px;
        }

        /* Gaya untuk header */
        header {
            background: linear-gradient(to right, #000000, #0033cc); /* Gradasi hitam ke biru */
            color: #fff;
            text-align: center;
            padding: 5rem 1rem 3rem; /* Menambah padding atas untuk mengakomodasi navbar */
            position: relative;
            overflow: hidden;
            margin-top: 4rem; /* Memberi jarak dari navbar */
        }

        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.3); /* Overlay putih semi-transparan */
            z-index: 1;
            pointer-events: none;
        }

        header h1 {
            font-size: 3rem;
            margin-bottom: 0.5rem;
            position: relative;
            z-index: 2;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        header h2 {
    font-size: 1.5rem;
    font-weight: 400;
    position: relative;
    z-index: 2;
    text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
    margin-top: 3rem; /* Tambahkan jarak atas */
}


        /* Gaya untuk main section */
        main {
            padding: 2rem;
            max-width: 1200px;
            margin: auto;
        }

        /* Gaya untuk form section */
        #form-section {
            background: #fff;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-top: 7rem; /* Tambahkan jarak atas di sini */
            margin-bottom: 2rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        #form-section:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        #form-section h2 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: #0033cc;
            text-align: center;
            margin-top: 3rem;
        }

        #form-section form {
            display: flex;
            flex-direction: column;
        }

        #form-section label {
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: #333;
        }

        #form-section input[type="text"],
        #form-section input[type="number"],
        #form-section input[type="date"],
        #form-section select {
            padding: 0.75rem;
            margin-bottom: 1rem;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        #form-section input[type="text"]:focus,
        #form-section input[type="number"]:focus,
        #form-section input[type="date"]:focus,
        #form-section select:focus {
            border-color: #0033cc;
            outline: none;
            box-shadow: 0 0 5px rgba(0, 51, 204, 0.5);
        }

        #form-section input[type="submit"] {
            background: #0033cc;
            color: #fff;
            padding: 0.75rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }

        #form-section input[type="submit"]:hover {
            background: #002299;
            transform: translateY(-3px);
        }

        #form-section input[type="submit"]:active {
            transform: scale(0.95); /* Efek animasi saat tombol ditekan */
            background: #001966; /* Ubah warna latar saat ditekan */
        }

        /* Gaya untuk kontak section */
        #contact {
            background: #fff;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        #contact h2 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: #0033cc;
        }

        #contact p {
            font-size: 1rem;
            color: #333;
        }

        /* Gaya untuk alert */
        .alert {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            display: none; /* Default: disembunyikan */
        }

        .alert.success {
            background-color: #4CAF50;
            color: white;
        }

        .alert.error {
            background-color: #f44336;
            color: white;
        }

        /* Gaya footer */
        footer {
            background-color: #333;
            color: #fff;
            text-align: center;
            padding: 1rem 0;
            position: relative;
            bottom: 0;
            width: 100%;
        }

        /* Gaya scrollbar untuk browser Webkit */
        .card-container::-webkit-scrollbar {
            height: 8px;
        }

        .card-container::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }

        .card-container::-webkit-scrollbar-track {
            background: #f4f4f4;
        }

        /* Responsivitas */
        @media (max-width: 768px) {
            .card-container {
                padding: 1rem 0.5rem;
            }

            #form-section, #contact {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <nav>
        <div class="nav-container">
            <div class="nav-logo">Wahana Pondok Ungu</div>
            <div class="nav-menu">
                <a href="index.html" class="nav-link">Beranda</a>
                <a href="reportrev1.html" class="nav-link">Laporan Kas</a>
    
            </div>
        </div>
    </nav>
   
    <main>
        <section id="form-section">
            <h2>Tambah Data Keuangan</h2>
            <div id="alert" class="alert"></div> <!-- Div untuk alert -->
            <form name="dataForm" onsubmit="return submitForm();">
                <label for="tanggal">Tanggal:</label>
                <input type="date" id="tanggal" name="tanggal" required>
            
                <label for="category">Category:</label>
                <select id="category" name="category" required onchange="updateSubCategoryOptions()">
                    <option value="" disabled selected>Pilih Category</option>
                    <option value="Pemasukan">Pemasukan</option>
                    <option value="Pengeluaran">Pengeluaran</option>
                </select>
            
                <label for="subCategory">Sub Category:</label>
                <select id="subCategory" name="subCategory" required>
                    <option value="" disabled selected>Pilih Sub Category</option>
                </select>
            
                <label for="nominal">Nominal:</label>
                <input type="number" id="nominal" name="nominal" required>
            
                <input type="submit" value="Submit">
            </form>
            
            <script>
                function updateSubCategoryOptions() {
                    const category = document.getElementById('category').value;
                    const subCategorySelect = document.getElementById('subCategory');
            
                    // Clear existing options
                    subCategorySelect.innerHTML = '<option value="" disabled selected>Pilih Sub Category</option>';
            
                    // Add new options based on the selected category
                    if (category === 'Pemasukan') {
                        const options = ['Iuran Kas', 'Donasi'];
                        options.forEach(option => {
                            const opt = document.createElement('option');
                            opt.value = option;
                            opt.textContent = option;
                            subCategorySelect.appendChild(opt);
                        });
                    } else if (category === 'Pengeluaran') {
                        const options = ['Suka Cita', 'Duka Cita','Konsumsi Kerja Bakti','Lainnya'];
                        options.forEach(option => {
                            const opt = document.createElement('option');
                            opt.value = option;
                            opt.textContent = option;
                            subCategorySelect.appendChild(opt);
                        });
                    }
                }
            
                function submitForm() {
                    const form = document.forms['dataForm'];
                    const submitButton = form.querySelector('input[type="submit"]');
                    submitButton.value = 'Loading...'; // Tampilkan teks Loading...
                    submitButton.disabled = true; // Nonaktifkan tombol sementara

                    const tanggal = form['tanggal'].value;
                    const category = form['category'].value;
                    const subCategory = form['subCategory'].value;
                    const nominal = form['nominal'].value;

                    const payload = {
                        tanggal: tanggal,
                        category: category,
                        subCategory: subCategory,
                        nominal: nominal
                    };

                    const queryString = Object.keys(payload).map(key => key + '=' + encodeURIComponent(payload[key])).join('&');

                    const url = 'https://script.google.com/macros/s/AKfycbyEQSVtY0_5iFH4ArDmaogTPD0KUieIAheBUkVNXoyxoWsDLiaI-KpZzuhEHVI9Ircv/exec';

                    fetch(url, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/x-www-form-urlencoded'
                        },
                        body: queryString
                    })
                    .then(response => response.json())
                    .then(data => {
                        const alertDiv = document.getElementById('alert');
                        if (data.status === 'success') {
                            alertDiv.textContent = 'Data berhasil ditambahkan!';
                            alertDiv.className = 'alert success';
                        } else {
                            alertDiv.textContent = 'Terjadi kesalahan: ' + data.message;
                            alertDiv.className = 'alert error';
                        }
                        alertDiv.style.display = 'block';
                        setTimeout(() => {
                            alertDiv.style.display = 'none';
                        }, 3000); // Menghilangkan alert setelah 3 detik
                        form.reset(); // Reset form setelah berhasil submit
                    })
                    .catch(error => {
                        const alertDiv = document.getElementById('alert');
                        alertDiv.textContent = 'Error: ' + error;
                        alertDiv.className = 'alert error';
                        alertDiv.style.display = 'block';
                        setTimeout(() => {
                            alertDiv.style.display = 'none';
                        }, 3000); // Menghilangkan alert setelah 3 detik
                    })
                    .finally(() => {
                        submitButton.value = 'Submit'; // Kembalikan teks tombol
                        submitButton.disabled = false; // Aktifkan kembali tombol
                    });

                    return false;
                }
            </script>
            
        </section>
    
    </main>
</body>
</html>
